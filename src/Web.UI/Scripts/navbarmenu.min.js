function NavBarMenu(n,t){var o=this,s=100,h=500,r=0,c=0,i=0,u=0,myName=n,f=t,l=function(){r&&(window.clearTimeout(r),r=null)},a=function(){l();e();u&&(i=$(u).addClass("open"))},e=function(){if(i){if(i.attr("over")||i.find("[over=true]").length>0)return;i.removeClass("open");i.parents("[over!=true].open").removeClass("open")}if(i){var n=i.parents("[over=true]");i=n.length>0?$(n[0]):null}},v=function(){u=this;r=window.setTimeout(a,i?0:s)},y=function(){u=0;c=window.setTimeout(e,h)};$&&$.support.opacity&&$(document).ready(function(){eval(myName+".InitMenu();")}).click(o.CloseMenu);this.InitMenu=function(){navigator.msMaxTouchPoints||($(f+".openable").removeClass("openable").hover(v,y),$(f).hover(function(){$(this).attr("over","true")},function(){$(this).removeAttr("over")}))};this.ShowMap=function(n,t){var i=$("#"+t);n.populated||n.populating||(n.populating=!0,i.css({height:"200px",width:"100px"}),i.load("/script/content/Ajax/SiteMap.aspx",function(){n.populated=!0}),window.setTimeout(this.InitMenu,200),n.populated=!0,n.populating=!1);n.populated&&(this.InitMenu(),i.css("margin","0"),i.css("width","auto"),i.css("height","auto"))}}function InitWatermark(n,t){var i=$("#"+n),r;i&&(i.blur(function(){UpdateWatermark(this,t)}),i.focus(function(){UpdateWatermark(this,t)}),r=$.trim(i.val()),r==""||r==t?(i.val(t),i.addClass("subdue")):r!=""&&r!=t&&i.removeClass("subdue"))}function UpdateWatermark(n,t){if(n){var i=$.trim($(n).val());i==t&&$(n).hasClass("subdue")?($(n).val(""),$(n).removeClass("subdue")):i!=""||$(n).hasClass("subdue")?$(n).removeClass("subdue"):($(n).val(t),$(n).addClass("subdue"))}}function NotificationAlert(n,t,i){var o=this,r=$("#"+n),u=$("#"+t),f=i,e=function(){r.populated||r.populating||(r.populating=!0,u.load(f,{cache:!1},function(){r.populated=!0}),r.populated=!0,r.populating=!1)};this.MarkAsRead=function(n,t,i,r){var u=$("#"+i),f=u.html();return u.html('<img src="/Images/animated_loading_blue.gif" align="absmiddle" style="border:0" />'),$.ajax({type:"POST",cache:!1,url:t,data:"{notificationId: "+n+"}",contentType:"application/json; charset=utf-8",dataType:"json",tryCount:0,retryLimit:3,timeout:5e3,success:function(){u.remove();$("#"+r).children().first().removeClass("bold")},error:function(){u.html(f)}}),!1};this.initialise=function(){$(r).bind("mouseover",e)}}var navBarMenu=new NavBarMenu("navBarMenu",".navmenu li"),signinMenu=new NavBarMenu("signinMenu",".member-signin");(function(n){n.sticky=function(t,i,r){function s(){if(u){var t=u.offset(),n={};return(n.isStickyRequired=r==="top",n.top=t.top,n.left=t.left,n.position=u.css("position"),n.top===-1)?null:n}}function c(){f&&(u.css("position",f.position),u.css("top",f.top),u.css("left",f.left),u.removeClass("stuck"),o=!1)}function l(n){var t=n.offset();return t.width=n.outerWidth(!0),t.height=n.outerHeight(!0),t.right=t.left+t.width,t.bottom=t.top+t.height,t}var e=this,u=n(t),h=10,o=!1,f;e.ReGetOriginalLayout=function(){f&&(c(),f=s(),e.RepositionStickyElement())};e.RepositionStickyElement=function(){var t,a,r,e;i&&i.length&&(t=l(i));a=n(window).scrollTop();r=l(u);t&&r.bottom>t.top?e=r.top-(r.bottom-t.top)-a:a+h>=f.top?e=h:o||(f=s());e&&t&&a+e+r.height>t.top&&(e=r.top-(r.bottom-t.top)-a);e?(u.css("position","fixed"),u.css("top",e),u.css("left",f.left-n(window).scrollLeft()),u.addClass("stuck"),o=!0):c()};e.init=function(){r=r||"top";u&&(f=s(),n(window).bind("resize",e.ReGetOriginalLayout),n(window).bind("scroll",e.RepositionStickyElement))};e.init()};n.fn.sticky=function(t,i){return this.each(function(){new n.sticky(this,t,i)})}})(jQuery);